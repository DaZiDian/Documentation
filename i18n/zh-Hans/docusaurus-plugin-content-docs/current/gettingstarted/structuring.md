# 结构化您的模组

结构化模组有利于维护、贡献并提供对底层代码库的更清晰理解。以下是一些建议，源自 Java、Minecraft 和 NeoForge。

:::note
您不必遵循下面的建议；您可以按照自己认为合适的方式结构化您的模组。然而，还是强烈建议这样做。
:::

## 包结构

在构建您的模组时，选择一个独特的顶级包结构。许多程序员会为不同的类、接口等使用相同的名称。Java允许在不同的包中有相同名称的类。因此，如果两个类有相同的包和相同的名称，只有一个类会被加载，很可能会导致游戏崩溃。

```
a.jar
  - com.example.ExampleClass
b.jar
  - com.example.ExampleClass // 这个类通常不会被加载
```

当涉及到加载模块时，这一点尤其相关。如果两个包在不同的模块下有同名的类文件，这将导致模组加载器在启动时崩溃，因为模组模块被导出到游戏和其他模组。

```
模块 A
  - 包 X
    - 类 I
    - 类 J
模块 B
  - 包 X // 这个包将导致模组加载器崩溃，因为已经有一个模块导出了包 X
    - 类 R
    - 类 S
    - 类 T
```

因此，您的顶级包应该是您拥有的东西：域名、电子邮件地址、网站（或子域）等。它甚至可以是您的名字或用户名，只要您能保证它在预期目标中具有唯一可识别性。此外，顶级包还应与您的[group id][group]匹配。

|   类型    |       值       | 顶级包                 |
|:---------:|:--------------:|:----------------------|
|  域名     |  example.com   | `com.example`         |
| 子域名    | example.github.io | `io.github.example` |
|   电邮   | example@gmail.com | `com.gmail.example` |

下一级包应该是您的模组的ID（例如，`com.example.examplemod`，其中`examplemod`是模组ID）。这将保证，除非您有两个模组ID相同的模组（这种情况永远不应该发生），否则您的包不应该有任何加载问题。

您可以在[Oracle的教程页面][naming]上找到一些额外的命名约定。

### 子包组织

除了顶级包，强烈建议将模组的类分配到子包中。有两种主要的方法来做到这一点：

* **按功能分组**：为具有共同目的的类制作子包。例如，可以将方块放在`block`下，物品放在`item`下，实体放在`entity`下等。Minecraft本身使用类似的结构（有一些例外）。
* **按逻辑分组**：为具有共同逻辑的类制作子包。例如，如果您正在创建一个新类型的工作台，您可以将其方块、菜单、物品等放在`feature.crafting_table`下。

#### 客户端、服务器和数据包

通常，只针对给定侧或运行时的代码应该与其他类隔离在一个单独的子包中。例如，与[数据生成][datagen]相关的代码应该放在`data`包中，只在专用服务器上的代码应该放在`server`包中。

强烈建议将[仅客户端代码][sides]

隔离在`client`子包中。这是因为专用服务器无法访问Minecraft中的任何客户端专用包，并且如果您的模组试图访问它们，将会崩溃。因此，拥有一个专用包提供了一个很好的检查方法，以验证您没有在模组内跨侧访问。

## 类命名方案

常见的类命名方案使得更容易理解类的用途或轻松找到特定类。

类通常以其类型为后缀，例如：

* 一个名为 `PowerRing` 的 `Item` -> `PowerRingItem`。
* 一个名为 `NotDirt` 的 `Block` -> `NotDirtBlock`。
* 一个 `Oven` 的菜单 -> `OvenMenu`。

:::tip
Mojang 通常遵循类似的结构来命名所有类，除了实体。这些实体只用它们的名字表示（例如，`Pig`，`Zombie`等）。
:::

## 从多种方法中选择一种

执行特定任务有许多方法：注册对象、监听事件等。通常建议使用单一方法来完成给定任务。这可以提高可读性，并避免可能发生的奇怪交互或冗余（例如，您的事件监听器运行两次）。

[group]: index.md#the-group-id
[naming]: https://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html
[datagen]: ../resources/index.md#data-generation
[sides]: ../concepts/sides.md
