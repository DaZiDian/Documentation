# ForgeGradle 5到6迁移指南

这是一个从ForgeGradle 5迁移到6的高层次、非详尽的概览。

## 添加 Foojay 工具链插件

Gradle 现在使用 [Foojay 工具链插件](https://github.com/gradle/foojay-toolchains) 来管理 Java 工具链。该插件必须添加到 `settings.gradle[.kts]` 中：

使用 Gradle DSL：

```gradle
// 在 settings.gradle 中
plugins {
    id 'org.gradle.toolchains.foojay-resolver-convention' version '0.5.0'
}
```

使用 Kotlin DSL：

```kotlin
// 在 settings.gradle.kts 中
plugins {
    id("org.gradle.toolchains.foojay-resolver-convention") version "0.5.0"
}
```

## 更新 Gradle 至 8.1.1

首先，你需要更新你的 Gradle Wrapper 使用 8.1.1 版本。你可以在 [Gradle迁移指南](https://docs.gradle.org/current/userguide/upgrading_version_7.html) 上找到有关从 7 到 8 版本迁移的更多信息。

这可以通过以下两种方式之一完成：

### `gradle wrapper`

首选的选项是使用 `gradle wrapper` 命令与 `--gradle-version` 选项。

```bash
# 在gradle项目的根目录内
./gradlew wrapper --gradle-version=8.1.1
```

### gradle-wrapper.properties

这种方法不推荐，仅当上面的 `gradlew wrapper` 命令失败时使用。

更新 `gradle/wrapper/gradle-wrapper.properties` 内的 `distributionUrl` 属性中的版本。之后运行 `./gradlew wrapper`。

```properties
distributionUrl=https\://services.gradle.org/distributions/gradle-8.1.1-bin.zip
```

## 更新 ForgeGradle 插件版本

更新 Gradle 后，在你的 `build.gradle[.kts]` 中更新 `ForgeGradle` 版本到 `[6.0,6.2)`：

使用 Gradle DSL：

```gradle
// 在 build.gradle 中
plugins {
    id 'net.minecraftforge.gradle' version '[6.0,6.2)'
}
```

使用 Kotlin DSL：

```kotlin
// 在 build.gradle.kts 中
plugins {
    id("net.minecraftforge.gradle") version "[6.0,6.2)"
}
```

## 从运行配置中移除 `forceExit`

ForgeGradle 现在已经移除了运行配置中的 `forceExit` 属性。对运行任务的更改仅适用于当前项目而不适用于任何子项目。

### 小的添加、更改、移除

### 重混淆类路径继承

如果你在 `reobf*` 任务配置中使用了 `classpath.from` 来声明额外库，必须要考虑的 `reobf*` 任务；它应该迁移至 `libraries.from` 属性而不是。

### Eclipse 启动器组

如果设置了 ForgeGradle 使 Eclipse 在开始游戏之前运行 Gradle 任务，你必须从 `Launch Group` 文件夹执行运行配置。如果在 `minecraft` 块中启用了新属性，这只是正确的。

![Eclipse 启动器组演示](/img/eclipse_launch_groups.png)

### 在 ModConfig 中移除 `resources` 和 `classes`

在 ForgeGradle 6中，运行配置的 `mods` 块内的 `resources` 和 `classes` 属性已被移除。
